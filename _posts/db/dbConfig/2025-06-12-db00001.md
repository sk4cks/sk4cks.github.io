---
layout: single
title: "ğŸ‘Œ rhel8 íì‡„ë§ì— postgresql 15.1 ì„¤ì¹˜"
categories:
  - dbConfig
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "sidebar-category"
---

# 1. ì¸í„°ë„· ë˜ëŠ” í™˜ê²½ì—ì„œ ì„¤ì¹˜íŒŒì¼ ì¤€ë¹„

## 1-1. createrepo ì¤€ë¹„

```bash
# createrepo ë° ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œ
sudo dnf install --downloadonly --downloaddir=./createrepo_rpms createrepo

# ì„¤ì¹˜íŒŒì¼ ì••ì¶•í•˜ê¸°
tar -czvf createrepo_rpms.tar.gz createrepo_rpms/

# ì„¤ì¹˜íŒŒì¼ì„ usbì— ë³µì‚¬
```

## 1-2. postgresql 15.1 ì¤€ë¹„

```bash
# PostgreSQL ê³µì‹ YUM ì €ì¥ì†Œ ì„¤ì •
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# AppStream PostgreSQL ëª¨ë“ˆ ì‚¬ìš© ì•ˆ í•¨ (ê¸°ë³¸ PostgreSQL 10 ì œê±°)
sudo dnf -qy module disable postgresql

# PostgreSQL 15.1 RPM íŒ¨í‚¤ì§€ ë° ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ
sudo dnf install --downloadonly --downloaddir=./postgresql15.1-rpms postgresql15-15.1 postgresql15-server-15.1 postgresql15-libs-15.1 postgresql15-contrib-15.1

# ì„¤ì¹˜íŒŒì¼ ì••ì¶•í•˜ê¸°
tar -czvf postgresql15.1-rpms.tar.gz postgresql15.1-rpms/

# ì„¤ì¹˜íŒŒì¼ì„ usbì— ë³µì‚¬
```

# 2. íì‡„ë§ì— ì„¤ì¹˜íŒŒì¼ ë³µì‚¬ í›„ ì„¤ì¹˜

## 2-1. createrepo ë³µì‚¬ í›„ ì„¤ì¹˜

```bash
# createrepo_rpms.tar.gz ë³µì‚¬ í›„ ì••ì¶• í•´ì œ
tar -zxvf createrepo_rpms.tar.gz

# createrepo rpmíŒŒì¼ë“¤ ì‹¤í–‰
sudo rpm -ivh createrepo_rpms/*.rpm
```

## 2-2. postgresql 15.1 ë³µì‚¬ í›„ ì„¤ì¹˜

```bash
# postgresql15.1-rpms.tar.gz ë³µì‚¬ í›„ ì••ì¶• í•´ì œ
tar -zxvf postgresql15.1-rpms.tar.gz

# ë¡œì»¬ ì €ì¥ì†Œ ìƒì„±
createrepo /{ê²½ë¡œ}/postgresql15.1-rpms

# ë¡œì»¬ ì €ì¥ì†Œ ì„¤ì •
sudo tee /etc/yum.repos.d/local-postgresql.repo <<EOF
[local-postgresql]
name=Local PostgreSQL 15
baseurl=file://{ê²½ë¡œ}/postgresql15.1-rpms
enabled=1
gpgcheck=0
EOF

# ì €ì¥ì†Œ ìºì‹œ ê°±ì‹ 
sudo dnf clean all

# ë¡œì»¬ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ postgresql ì„¤ì¹˜
sudo dnf install -y --repo=local-postgresql postgresql15-15.1 postgresql15-server-15.1 postgresql15-libs-15.1 postgresql15-contrib-15.1

# DB ì´ˆê¸°í™”
sudo /usr/pgsql-15/bin/postgresql-15-setup initdb

# ì„œë¹„ìŠ¤ í™œì„±í™” ë° ì‹œì‘
sudo systemctl enable postgresql-15
sudo systemctl start postgresql-15

# DB ë²„ì „ í™•ì¸
psql --version

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status postgresql-15

# ì ‘ì† í…ŒìŠ¤íŠ¸
sudo -u postgres psql -c "SELECT version();"
```
