---
layout: single
title: "ğŸ¬[ìŠ¤í”„ë§ ë¶€íŠ¸ - ì´í•´ì™€ ì›ë¦¬] ìŠ¤í”„ë§ ë¶€íŠ¸ ìì„¸íˆ ì‚´í´ë³´ê¸°"
categories:
  - springBoot
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "sidebar-category"
---

## ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ê³¼ í…ŒìŠ¤íŠ¸ë¡œ ì „í™˜

ì§ì ‘ êµ¬í˜„í–ˆë˜ ìë™ êµ¬ì„± í´ë˜ìŠ¤ì™€ ì• ë…¸í…Œì´ì…˜ ë“±ì„ ì œê±°í•œë‹¤.<br/>
ë©”ì¸ ì• ë…¸í…Œì´ì…˜ì„ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ @SpringBootApplicationë¡œ ë³€ê²½í•œë‹¤.

```java
@SpringBootApplication
public class HellobootApplication {
```

í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ë‚´ì¥í˜• DBë¥¼ ì´ìš©í•´ì„œ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë¡œì§ë§Œ í…ŒìŠ¤íŠ¸ í•  ë•ŒëŠ” @JdbcTestë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤. í”„ë¡œí¼í‹°ë¡œ ì„¤ì •í•œ DB ì ‘ì† ì •ë³´ê°€ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë‹ˆ ì£¼ì˜í•  ê²ƒ.

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë„ìš°ê³  ìë™ êµ¬ì„±ê¹Œì§€ ì ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•ŒëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ë„ìš¸ ê²ƒì¸ê°€ì— ë”°ë¼ì„œ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ë¡¤ë°± í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ” @Transactionalì„ ë„£ì–´ì¤˜ì•¼ í•œë‹¤.

```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)
@Transactional
public class HelloRepositoryTest {
```

ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ë„ì›Œì„œ HTTP ìš”ì²­ì„ ë³´ë‚´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í•œë‹¤.

```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)
public class HelloApiTest {
```

í”„ë¡œí¼í‹°ì˜ ì´ë¦„ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.

## ìŠ¤í”„ë§ ë¶€íŠ¸ ìì„¸íˆ ì‚´í´ë³´ê¸°

![image](https://github.com/user-attachments/assets/95c68e77-9096-413a-ac92-73947db3cf63)

ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ë™ì‘ ë°©ì‹ì„ ì´í•´í•˜ê³ , ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ê³¼ ê´€ë ¨ëœ ìë™ êµ¬ì„±ê³¼ í”„ë¡œí¼í‹° ë“±ì„ ë¶„ì„í•˜ê³ , ì–´ë–»ê²Œ í™œìš©í• 
ìˆ˜ ìˆëŠ”ì§€ íŒŒì•…í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.

![image](https://github.com/user-attachments/assets/aeeb98b5-6301-4cf2-863c-b51430f77b62)

ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ìœ¼ë¡œë¶€í„° í•™ìŠµí•  ê¸°ìˆ ì„ í•˜ë‚˜ì”© ì°¾ì•„ì„œ í•„ìš”í•œ ë¶€ë¶„ì„ ê³µë¶€í•˜ëŠ” ì ‘ê·¼ ë°©ë²•ë„ ìœ ìš©í•˜ë‹¤.

## ìë™ êµ¬ì„± ë¶„ì„ ë°©ë²•

![image](https://github.com/user-attachments/assets/f3e72554-5cb0-487a-976d-3d8f7d939f87)

- ìë™ êµ¬ì„± í›„ë³´ ëª©ë¡ê³¼ ì¡°ê±´ íŒë‹¨ ê²°ê³¼ë¥¼ ì¡°íšŒí•˜ë ¤ë©´ -Ddebugì´ë‚˜ --debug ì¸ì ê°’ì„ ì´ìš©í•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•˜ë©´ ëœë‹¤.
- ì½”ë“œë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ë„ ì œê³µëœë‹¤. ConditionEvaluationReport íƒ€ì…ì˜ ë¹ˆì„ ì£¼ì… ë°›ì•„ì„œ í•„ìš”í•œ ì •ë³´ë§Œ ì„ íƒí•´ì„œ ìë™ êµ¬ì„± ê²°ê³¼ë¥¼ ë³´ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
- ìµœì¢…ì ìœ¼ë¡œ ë“±ë¡ëœ ë¹ˆ ëª©ë¡ì„ ë³´ê³  ì‹¶ìœ¼ë©´ ListableBeanFactory íƒ€ì…ì˜ ë¹ˆì„ ì£¼ì… ë°›ì•„ì„œ ë¹ˆ ì´ë¦„ì„ ëª¨ë‘ ê°€ì ¸ì˜¤ê³ , í•„ìš”í•˜ë©´ ë¹ˆ ì˜¤ë¸Œì íŠ¸ë„ ê°€ì ¸ì™€ì„œ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.

ìë™ êµ¬ì„± ì„ ì • ê²°ê³¼ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œ, ê·¸ë¦¬ê³  ìë™ êµ¬ì„± í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œ, í”„ë¡œí¼í‹° í´ë˜ìŠ¤, ì»¤ìŠ¤í† ë§ˆì´ì € ë“±ì„ ì°¨ê·¼ì°¨ê·¼ ë”°ë¼ì„œ ì‚´í´ë³´ë©´ì„œ ì–´ë–»ê²Œ ì–´ë–¤ ì¡°ê±´ìœ¼ë¡œ ë™ì‘í• ì§€ ë¶„ì„í•œë‹¤.

## ìë™ êµ¬ì„± ì¡°ê±´ ê²°ê³¼ í™•ì¸

ConditionEvaluationReportë¥¼ ì´ìš©í•´ì„œ ì¡°ê±´ì´ ë§¤ì¹­ëœ ìë™ êµ¬ì„± í´ë˜ìŠ¤ì™€ ë©”ì†Œë“œë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ê·¸
ì¤‘ì—ì„œ Jmx ê´€ë ¨ êµ¬ì„± ì •ë³´ëŠ” ì œì™¸í•˜ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.

```java
@Bean ApplicationRunner run(ConditionEvaluationReport report) {
    return args -> {
        System.out.println(report.getConditionAndOutcomesBySource().entrySet().stream()
            .filter(co -> co.getValue().isFullMatch())
            .filter(co -> co.getKey().indexOf("Jmx") < 0)
            .map(co -> {
                System.out.println(co.getKey());
                co.getValue().forEach(c -> {
                    System.out.println("\t" + c.getOutcome());
                });
                System.out.println();
                return co;
        }).count());
    };
}
```

## Core ìë™ êµ¬ì„± ì‚´í´ë³´ê¸°

@ConditionalOnProperty ì¡°ê±´ì¸ ê²½ìš° matchIfMissing = trueë¼ë©´ í”„ë¡œí¼í‹°ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ì¡°ê±´ì´ ë§¤ì¹­ëœë‹¤.

```java
@AutoConfiguration
@ConditionalOnProperty(prefix = "spring.aop", name = "auto", havingValue = "true", matchIfMissing = true)
public class AopAutoConfiguration {
```

## Web ìë™ êµ¬ì„± ì‚´í´ë³´ê¸°

ì›¹ ìŠ¤íƒ€í„°ë¥¼ ì¶”ê°€í•˜ê¸°ë§Œ í•´ë„ 50ê°œ ê°€ê¹Œìš´ ìë™ êµ¬ì„± í´ë˜ìŠ¤ì™€ ë¹ˆ ë©”ì†Œë“œ ì¡°ê±´ì´ ì¶”ê°€ëœë‹¤.

@ConditionalOnClass ë“±ì´ ë¶™ì€ í´ë˜ìŠ¤ì— @Importê°€ ë¶™ì–´ìˆëŠ” ê²½ìš°ì—” í´ë˜ìŠ¤ ë ˆë²¨ì˜ ì¡°ê±´ì´ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ê²½ìš° @Importê°€ ë™ì‘í•´ì„œ ìë™ êµ¬ì„±ì„ ì¶”ê°€ì‹œê¸°ë„ í•œë‹¤.

```java
@AutoConfiguration(
    after = { GsonAutoConfiguration.class, JacksonAutoConfiguration.class, JsonbAutoConfiguration.class })
@ConditionalOnClass(HttpMessageConverter.class)
@Conditional(NotReactiveWebApplicationCondition.class)
@Import({ JacksonHttpMessageConvertersConfiguration.class, GsonHttpMessageConvertersConfiguration.class,
    JsonbHttpMessageConvertersConfiguration.class })
public class HttpMessageConvertersAutoConfiguration {
```

<br/>
Customizer ë¹ˆì„ ì´ìš©í•˜ëŠ” ìë™ êµ¬ì„±ì€ í”„ë¡œí¼í‹° ë¹ˆì„ Customizerê°€ ì£¼ì…ì„ ë°›ê³ , ì´ë¥¼ ë¹ˆ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“œëŠ” ë©”ì†Œë“œì—ì„œ Customizerë¥¼ ì£¼ì… ë°›ì•„ì„œ í”„ë¡œí¼í‹° ì„¤ì • ë¡œì§ì„ ì ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸°ë„ í•œë‹¤.

<br/>
ìµœì¢… ë¹ˆ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“œëŠ” Builderë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤. ì´ ë¹Œë” ë¹ˆì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°€ì ¸ë‹¤ ì‚¬ìš©í•´ì„œ ë¹ˆ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§ì ‘ êµ¬ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.<br/>
RestTemplateBuilder ì²˜ëŸ¼ ë¹Œë”ë§Œ ìë™ êµ¬ì„±ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

```java
@Bean
@Lazy
@ConditionalOnMissingBean
public RestTemplateBuilder restTemplateBuilder(RestTemplateBuilderConfigurer restTemplateBuilderConfigurer) {
    RestTemplateBuilder builder = new RestTemplateBuilder();
    return restTemplateBuilderConfigurer.configure(builder);
}
```

## Jdbc ìë™ êµ¬ì„± ì‚´í´ë³´ê¸°

DataSource ìë™ êµ¬ì„±ì—ì„œ driver class nameì„ í”„ë¡œí¼í‹°ì— ë„£ì§€ ì•Šìœ¼ë©´ urlì„ ì´ìš©í•´ì„œ ë“œë¼ì´ë²„ì™€ í´ë˜ìŠ¤ ì´ë¦„ì„ ë„£ì–´ì¤€ë‹¤. ë‚´ì¥í˜• DBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— DataSource í”„ë¡œí¼í‹°ê°€ ì—†ìœ¼ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ ì—°ê²° ì •ë³´ë¥¼ ì„¤ì •í•´ì¤€ë‹¤.

<br/>
JdbcTransactionManagerëŠ” ê¸°ì¡´ DataSourceTransactionManagerì— ì˜ˆì™¸ ì¶”ìƒí™” ì‘ì—…ì˜ ë³€ê²½ì´ ë°˜ì˜ë˜ì–´ìˆë‹¤. ê¸°ì¡´ ë²„
ì „ê³¼ í˜¸í™˜ì„ ìœ„í•´ì„œ í”„ë¡œí¼í‹°ë¥¼ ì§€ì •í•œ ê²½ìš°ì—ë§Œ ì„ íƒëœë‹¤.

<br/>
@AutoConfigurationì€ ìë™ êµ¬ì„±ì„ ì§„í–‰í•  ì „í›„ ìˆœì„œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```java
@AutoConfiguration(after = DataSourceAutoConfiguration.class)
```

<br/>
TransactionPropertiesëŠ” PlatformTransactionManagerCustomizerë¥¼ êµ¬í˜„í•œë‹¤. í”„ë¡œí¼í‹° í´ë˜ìŠ¤ê°€ ìì‹ ì´ ê°€ì§„ ê°’ì„ ì´ìš©í•˜ëŠ” ê°„ë‹¨í•œ Customizer ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ë˜ê¸°ë„ í•œë‹¤.

```java
@ConfigurationProperties(prefix = "spring.transaction")
public class TransactionProperties implements PlatformTransactionManagerCustomizer<AbstractPlatformTransactionManager> {
```

## ì •ë¦¬

![image](https://github.com/user-attachments/assets/9ec8c4bf-33be-4926-a7e8-94d0d9e618e3)

![image](https://github.com/user-attachments/assets/bfb02fd4-e675-48e3-b80f-a2d72ce8313a)

![image](https://github.com/user-attachments/assets/55010a03-6895-43ae-862b-97ebcd881662)
