---
layout: single
title: "Jsp&SpringBoot í”„ë¡œì íŠ¸ Warë¡œ ë°°í¬í•˜ê¸°"
categories:
  - springBoot
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "sidebar-category"
---

## 1. build.gradle ìˆ˜ì •

```gradle
//í”ŒëŸ¬ê·¸ì¸ ì„¤ì •
plugins {
	...
	id 'war'
}

dependencies {
	// jsp - ì™¸ë¶€ WAS ë°°í¬ìœ„í•´ compileOnly
	compileOnly 'org.springframework.boot:spring-boot-starter-tomcat'
	compileOnly 'org.apache.tomcat.embed:tomcat-embed-jasper'
	compileOnly 'javax.servlet:jstl:1.2'
	...
}

// ì™¸ì¥ WAR ì„¤ì •
bootWar {
	archiveBaseName = 'ROOT'
	archiveVersion = '1.0.1'
	archiveClassifier = ''
	//archiveFileName = 'ROOT.war' // ì„¤ì •ì•ˆí•˜ë©´ {baseName}-{version}-{classifier:ê¸°ë³¸ê°’plan}.war
}
```

## 2. SpringBootServletInitializer ìƒì†

ğŸ”‘ ì™¸ì¥ í†°ìº£ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œëŠ” main í´ë˜ìŠ¤ì—ì„œ SpringBootServletInitializerìƒì† ë°›ê³ , configure ë©”ì„œë“œ ì˜¤ë²„ ë¼ì´ë”©ì´ ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•˜ë‹¤.

```java
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;

@SpringBootApplication
public class TestApplication extends SpringBootServletInitializer {

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(TestApplication.class);
    }

    public static void main(String[] args) {
        SpringApplication.run(TestApplication.class, args);
    }
}
```

## 3. bootWar(gradle task) ì‹¤í–‰

ğŸ”‘ gradle taskì—ì„œ bootWarë¥¼ ë”ë¸”í´ë¦­ í•˜ë©´ build/libs í´ë” í•˜ìœ„ì— waríŒŒì¼ì´ ìƒì„±ëœë‹¤.

## 4. WAR ë°°í¬

- (defualt)ì„¤ì¹˜í•œ tomcat í´ë”ì— webapps í•˜ìœ„ì— waríŒŒì¼ì„ ë„£ê³  ROOT.warë¡œ íŒŒì¼ëª… ë³€ê²½ í›„ ê¸°ì¡´ì— ìˆë˜ ROOT í´ë”ëŠ” ì‚­ì œí•œë‹¤.
- (other) ë‹¤ë¥¸ì´ë¦„ìœ¼ë¡œ warë¥¼ ì‚¬ìš©í•  ê²½ìš°

  - ë˜‘ê°™ì´ webapps í•˜ìœ„ì— waríŒŒì¼ì„ ë„£ëŠ”ë‹¤.
  - conf/server.xml ìˆ˜ì •

    ```java
    //ex) root contextë¥¼ exampleë¡œ ë“±ë¡ (example.war)
    <Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">
        <Context path="/" docBase="example"  reloadable="false" > </Context>
    </Host>

    //<Context path="[ê²½ë¡œ]" docBase="[waríŒŒì¼ì˜ ì´ë¦„]" reloadable="false"></Context>
    //tomcatì„œë²„ì—ì„œ í•˜ë‚˜ì˜ ê°€ìƒê²½ë¡œë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ path="/"ë¡œ ì„¤ì •í•˜ë©´ ROOTí´ë” ëŒ€ì‹ 
    // ë“±ë¡í•œ í´ë”ê°€ ì‹¤í–‰ëœë‹¤.
    ```

## 5. tomcat ì‹¤í–‰

## [TroubleShooting] JAVA_HOMEì´ë‘ í”„ë¡œì íŠ¸ JDK ë²„ì „ì´ ë‹¤ë¦„

### 1. jdk ê²½ë¡œ ë³€ê²½

- tomcatí´ë”ê²½ë¡œ/bin/catalina.bat ìˆ˜ì •

```java
set "JAVA_HOME=C:\Program Files\Java\jdk-11"
set "JRE_HOME=C:\Program Files\Java\jdk-11"

//í”„ë¡œì íŠ¸ì— ë§ëŠ” jdkê²½ë¡œë¥¼ ì¶”ê°€
```

### 2. tomcat ì¬ì‹¤í–‰
